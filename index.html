<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="dark" />
    <title>OmniTrade - Crypto Trading Platform</title>
    <meta
      name="description"
      content="OmniTrade - Advanced Crypto Trading Platform"
    />
    <meta name="author" content="OmniTrade" />
    <!-- Use relative paths for assets -->
    <link rel="icon" href="./placeholder.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="./placeholder.svg" />

    <!-- API request interceptor -->
    <script>
      /**
       * Simple API request interceptor
       * Prevents 404 errors by intercepting API requests
       */
      console.log('Setting up API request interceptor...');

      // Override fetch to handle API requests with mock data
      const originalFetch = window.fetch;
      window.fetch = async function(input, init) {
        const url = typeof input === 'string' ? input :
                   input instanceof URL ? input.toString() : input.url;

        // Handle API requests with mock data
        if (url.includes('/api/')) {
          console.log(`Intercepting API request: ${url}`);
          return new Response(JSON.stringify({
            success: true,
            message: 'Mock data response',
            data: {}
          }), {
            status: 200,
            headers: { 'Content-Type': 'application/json' }
          });
        }

        // For non-API requests, use the original fetch
        return originalFetch(input, init);
      };
    </script>

    <meta property="og:title" content="OmniTrade - Crypto Trading Platform" />
    <meta
      property="og:description"
      content="Advanced crypto trading platform with portfolio management and exchange integration"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://lovable.dev/opengraph-image-p98pqg.png"
    />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta
      name="twitter:image"
      content="https://lovable.dev/opengraph-image-p98pqg.png"
    />
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <!-- Simple script loading -->
    <script>
      // Function to load the main script
      function loadMainScript() {
        // Create a script element
        const script = document.createElement('script');
        script.type = 'module';

        // Determine if we're in development or production
        const isDev = window.location.hostname === 'localhost' ||
                     window.location.hostname === '127.0.0.1';

        // Set the script source based on environment
        if (isDev) {
          script.src = '/src/main.tsx';
        } else {
          // For GitHub Pages or production
          const basePath = window.location.hostname.includes('github.io') ?
                          '/omnitrade-terminal' : '';
          script.src = `${basePath}/assets/main.js`;
        }

        // Add error handling
        script.onerror = function() {
          console.error('Failed to load application script');
          const rootEl = document.getElementById('root');
          if (rootEl) {
            rootEl.innerHTML = '<div style="padding: 20px; text-align: center;"><h1>Failed to load application</h1><p>Please check the browser console for errors.</p><p><a href="https://github.com/ArtCenter1/omnitrade-terminal">View on GitHub</a></p></div>';
          }
        };

        // Add the script to the document
        document.body.appendChild(script);
      }

      // Load the script when the page is ready
      window.addEventListener('DOMContentLoaded', loadMainScript);
    </script>

    <!-- GitHub Pages redirect script for SPA routing -->
    <script>
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      // This script checks to see if a redirect is present in the query string,
      // converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) {
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>

    <!-- Load the simple mock data script -->
    <script src="./mock-data.js"></script>
    <!-- Handle missing files -->
    <script src="./handle-missing-files.js"></script>
  </body>
</html>
